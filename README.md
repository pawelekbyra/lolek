Lolek - Autonomiczny Agent AI (Next.js + Vercel AI SDK)Lolek to zaawansowany agent AI zbudowany w oparciu o najnowsze standardy (State-of-the-Art 2025). Projekt wykorzystuje architekturÄ™ Generative UI 2.0, hybrydowÄ… pamiÄ™Ä‡ GraphRAG oraz bezpieczne Å›rodowisko wykonywania kodu (Sandbox).ğŸš€ Quick StartZainstaluj zaleÅ¼noÅ›ci:npm install
# lub
yarn install
# lub
pnpm install
Skonfiguruj zmienne Å›rodowiskowe:Skopiuj .env.example do .env.local i uzupeÅ‚nij klucze (OpenAI/Gemini, Postgres, E2B, etc.).Uruchom serwer deweloperski:npm run dev
OtwÃ³rz http://localhost:3000 w przeglÄ…darce.ğŸ§­ Kompas Technologiczny (Strategia 2025)PoniÅ¼sza sekcja definiuje "ZÅ‚oty Standard" konfiguracji dla agenta Lolek, oparty o analizÄ™ architektury systemÃ³w autonomicznych.1. FUNDAMENT: Generative UI (GenUI) 2.0Cel: PeÅ‚na interaktywnoÅ›Ä‡ i eliminacja migotania interfejsu.Zamiast renderowania po stronie serwera (streamUI), projekt migruje na Client-Side Tool Rendering.Mechanizm: Hook useChat z Vercel AI SDK po stronie klienta.PrzepÅ‚yw:Model decyduje o wywoÅ‚aniu narzÄ™dzia (np. showWeather).Serwer zwraca dane JSON + intencjÄ™.Klient (React) renderuje komponent wizualny (np. <WeatherCard />) w miejscu wywoÅ‚ania.// Wzorzec implementacji w LolekChat.tsx
const { messages } = useChat();

return (
  <div>
    {messages.map(m => (
      m.toolInvocations?.map(tool => {
        if (tool.toolName === 'showStockChart') {
           return <StockChart data={tool.args} />;
        }
      })
    ))}
  </div>
)
2. MÃ“ZG: PamiÄ™Ä‡ Hybrydowa i GraphRAGCel: PrzezwyciÄ™Å¼enie "amnezji relacyjnej" agenta.Samo wyszukiwanie wektorowe to za maÅ‚o. Lolek musi rozumieÄ‡ kontekst i relacje miÄ™dzy faktami.Architektura Bazy (Postgres + Prisma):PamiÄ™Ä‡ Epizodyczna: Logi rozmÃ³w, zdarzenia (kto, co, kiedy).PamiÄ™Ä‡ Semantyczna: pgvector do przechowywania embeddingÃ³w wiedzy.Graf Wiedzy: Relacyjne modelowanie danych (User -> Created -> Project).Hybrid Search: Algorytm wyszukiwania Å‚Ä…czy:Keyword Search: Precyzyjne dopasowanie nazw.Vector Search: PodobieÅ„stwo kontekstowe.Graph Traversal: Nawigacja po relacjach (np. "znajdÅº projekty autora X").3. RÄ˜CE: Bezpieczny Sandbox (Code Execution)Cel: Bezpieczne pisanie i uruchamianie kodu przez agenta.ZASADA KRYTYCZNA: Nigdy nie uruchamiamy kodu wygenerowanego przez AI bezpoÅ›rednio w Å›rodowisku Node.js aplikacji.RozwiÄ…zanie: Integracja z E2B (Code Interpreter SDK).DziaÅ‚anie: NarzÄ™dzie executePython wysyÅ‚a kod do izolowanej chmury E2B, ktÃ³ra zwraca wynik lub wygenerowany plik/obraz.4. WYDAJNOÅšÄ†: AsynchronicznoÅ›Ä‡ i OrkiestracjaCel: ObejÅ›cie limitÃ³w czasowych Vercel (Serverless timeout).Dla zadaÅ„ wymagajÄ…cych dÅ‚ugiego namysÅ‚u lub scrapowania danych:Orkiestracja: Wykorzystanie Inngest lub Trigger.dev.Flow:API odpowiada natychmiast ("PrzyjÄ…Å‚em, przetwarzam...").Zadanie trafia do kolejki backgroundowej.Worker przetwarza logikÄ™ bez limitu 10-60s.Wynik jest wypychany do UI przez WebSocket (np. Ably).âœ… Roadmapa WdroÅ¼eniowa (Sprint Checklist)Plan transformacji projektu Lolek na poziom PRO:Faza 1: Baza Danych i PamiÄ™Ä‡ ğŸ§ [ ] Schema: Zaktualizuj prisma.schema dodajÄ…c obsÅ‚ugÄ™ pgvector (rozszerzenie vector w Postgres).[ ] Modele: StwÃ³rz modele EpisodicMemory (logi) oraz SemanticFact (wiedza + embedding).[ ] Logika RAG: Zaimplementuj funkcjÄ™ retrieveContext(query) realizujÄ…cÄ… Hybrid Search (baza + wektory).Faza 2: Interfejs (Frontend) ğŸ¨[ ] Refactoring Chatu: Przepisz LolekChat.tsx na useChat (Client-Side Tool Invocation). UsuÅ„ streamUI zwracajÄ…ce HTML.[ ] Komponenty: StwÃ³rz bibliotekÄ™ "cegieÅ‚ek" UI (karty, tabele, wykresy), ktÃ³re agent moÅ¼e wywoÅ‚ywaÄ‡.Faza 3: Logika i NarzÄ™dzia ğŸ› ï¸[ ] Definicja NarzÄ™dzi: Zdefiniuj tools w route.ts uÅ¼ywajÄ…c zodSchema.[ ] Sandbox: PodÅ‚Ä…cz E2B SDK do narzÄ™dzia code_interpreter.[ ] Kolejkowanie: Zainstaluj SDK Inngest dla zadaÅ„ trwajÄ…cych >10s (np. analiza duÅ¼ej iloÅ›ci danych).Faza 4: BezpieczeÅ„stwo ğŸ”[ ] System Prompt: Zabezpiecz prompt przed atakami (instrukcje obronne).[ ] Auth: WymuÅ› autoryzacjÄ™ (Auth.js) na endpointach API czatu.Podsumowanie Architektury DocelowejElementStara Metoda (UnikaÄ‡) âŒNowa Metoda (Zalecana) âœ…UIServer-side streamUI (RSC)Client-side useChat + Tool InvocationPamiÄ™Ä‡Tylko wektory (Pinecone)GraphRAG (Postgres + Relacje + Wektory)Kod AIeval() w Node.jsE2B Sandbox / FirecrackerDÅ‚ugie zadaniaZwykÅ‚y endpoint APIInngest / Trigger.dev (Kolejki)
